---
- name: "check if {{ pkg_name|mandatory }} is installed"
  command: "pacman -Q {{ pkg_name|mandatory }}"
  failed_when: false
  changed_when: aur_package_check.rc != 0
  register: aur_package_check

- name: "install {{ pkg_name|mandatory }}"
  command: "pacaur -S {{ pkg_name|mandatory }} --needed --noconfirm"
  become: "{{ user_name }}"
  when: aur_package_check|changed

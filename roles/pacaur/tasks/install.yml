---
- name: "ensure neovim is installed"
  pacman:
    name: "neovim"
    state: present
  become: yes

- name: "check if {{ pkg_name }} is installed"
  command: "pacman -Q {{ pkg_name }}"
  failed_when: false
  register: aur_package_check
  changed_when: aur_package_check.rc != 0

- name: "install {{ pkg_name }}"
  command: "pacaur -S {{ pkg_name }} --needed --noconfirm"
  when: aur_package_check|changed

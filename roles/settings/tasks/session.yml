---
- name: "Create folder for configurations"
  file:
    path: "{{ config_dir }}"
    state: "directory"

- name: "Copy session configuration file"
  template:
    src: "session.j2"
    dest: "{{ config_dir }}/session"
    mode: 0600

- name: "Create folder for autostart programs"
  file:
    path: "{{ autostart_dir }}"
    state: "directory"

- name: "Copy session to autostart"
  template:
    src: "session.desktop.j2"
    dest: "{{ autostart_dir }}/session.desktop"
    mode: 0644

- name: "Set mouse settings"
  dconf:
    key: "{{ dconf_touchpad_base_key }}/{{ item.key }}"
    value: "{{ item.value }}"
    state: "present"
  with_items:
    - { key: "click-method", value: "{{ touchpad_click_method }}" }
    - { key: "natural-scroll", value: "{{ touchpad_natural_scroll }}" }

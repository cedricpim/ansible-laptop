---
- include_role:
    name: "pacaur"
    tasks_from: "install"
  vars:
    pkg_name: "todotxt"

- name: "create folders for todo configuration and files"
  file:
    path: "{{ item }}"
    state: "directory"
    owner: "{{ user }}"
    group: "{{ user }}"
  with_items:
    - "{{ todo_main_directory }}"
    - "{{ todo_directory }}"

- name: "copy todo configuration"
  template:
    src: "config.j2"
    dest: "{{ todo_directory }}/config"
    owner: "{{ user }}"
    group: "{{ user }}"
    mode: "0600"

- name: "clone todo.actions.d repository"
  git:
    repo: "{{ todo_actions_repo }}"
    dest: "{{ todo_actions_dest }}"
    clone: yes
    update: yes

---
- name: install zsh
  pacman:
    name: "{{ item }}"
    state: present
  with_items:
    - zsh
    - zsh-completions

- name: ensure pacaur is installed
  include_role:
    name: pacaur

- name: install zsh-autosuggestions
  command: "pacaur -S zsh-autosuggestions --needed --noconfirm"
  become: "{{ user_name }}"
  register: pacaur_install_result
  changed_when: pacaur_install_result.stdout.find('there is nothing to do') == -1

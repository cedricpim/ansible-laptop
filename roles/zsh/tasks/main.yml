---
- name: "install zsh"
  pacman:
    name:
      - "zsh"
      - "zsh-completions"
    state: "present"
  become: yes

- name: "change default shell to zsh"
  user:
    name: "{{ user }}"
    shell: "/usr/bin/zsh"
  become: yes

- name: "copy dircolors configuration file"
  template:
    src: "dircolors.j2"
    dest: "~/.dircolors"
    mode: "0600"
  when: ansible_system == "Linux"

- include_role:
    name: "pacaur"
    tasks_from: "install"
  vars:
    pkg_name: "zsh-autosuggestions"

- import_tasks: "configurations.yml"
- import_tasks: "ripgrep.yml"

- include_tasks: "scripts.yml"
  with_items:
    - "pserver-stats"
    - "pserver"
    - "upload"
  loop_control:
    loop_var: "script"
  when: server

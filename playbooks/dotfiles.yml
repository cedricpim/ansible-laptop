---
- hosts: local

  vars:
    user: "{{ lookup('env', 'USER') }}"

  vars_files:
    - "../vaulted_vars/{{ user }}/vault.yml"
    - "../vars/{{ user }}.yml"

  roles:
    - { role: "settings", tags: "settings" }
    - { role: "agenda", tags: "agenda" }
    - { role: "editor", tags: "editor" }
    - { role: "email", tags: "email" }
    - { role: "feeds", tags: "feeds", when: feeds is defined and feeds }
    - { role: "ledger", tags: "ledger", when: ledger is defined and ledger }
    - { role: "server", tags: "server", when: server is defined and server }
    - { role: "shell", tags: "shell" }
    - { role: "terminal", tags: "terminal" }
    - { role: "tmux", tags: "tmux" }
    - { role: "todo", tags: "todo" }
    - { role: "torrents", tags: "torrents", when: torrents is defined and torrents }
    - { role: "zsh", tags: "zsh" }
    - { role: "applications", tags: "applications" }
    - { role: "docker", tags: "docker" }
